# Guard-IA Environment Configuration
#
# Copy this file to .env.{environment} and fill in values:
#   .env.local     → local development (local DB, dev Clerk keys)
#   .env.staging   → staging on Cloud Run (Neon DB, staging Clerk keys)
#   .env.production → production (future)
#
# The backend loads env files based on APP_ENV value.

# === Application ===
APP_ENV=local
APP_DEBUG=true
APP_SECRET_KEY=change-me-in-production

# === Database ===
DATABASE_URL=postgresql+asyncpg://guardia:change_me_in_development@localhost:5432/guardia
POSTGRES_PASSWORD=change_me_in_development

# === Clerk Authentication ===
CLERK_SECRET_KEY=sk_test_...
CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_PEM_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
CLERK_ISSUER_URL=

# === SMTP Gateway ===
SMTP_HOST=0.0.0.0
SMTP_PORT=2525
SMTP_DOMAIN=guardia.strike.sh
SMTP_TLS_CERT=
SMTP_TLS_KEY=
SMTP_REQUIRE_TLS=false

# === Google Workspace Relay ===
GOOGLE_RELAY_HOST=aspmx.l.google.com
GOOGLE_RELAY_PORT=25
ACCEPTED_DOMAINS=strike.sh

# === Pipeline ===
THRESHOLD_ALLOW=0.3
THRESHOLD_WARN=0.6
THRESHOLD_QUARANTINE=0.8
PIPELINE_TIMEOUT_SECONDS=30

# === LLM - OpenAI ===
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4.1

# === ML Model ===
ML_MODEL_PATH=./ml_models/distilbert-guardia
ML_MAX_SEQ_LENGTH=256

# === MLflow ===
MLFLOW_TRACKING_URI=http://localhost:5000

# === CORS ===
# Comma-separated list of allowed origins (no wildcards)
# Production: https://guardia.strike.sh,https://app.strike.sh
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# === Rate Limiting ===
RATE_LIMIT_PER_MINUTE=100

# === Storage ===
QUARANTINE_STORAGE_PATH=./quarantine_store

# === Slack Alerts ===
SLACK_WEBHOOK_URL=
FRONTEND_BASE_URL=http://localhost:3000

# === Active Users ===
ACTIVE_USERS=

# === Frontend ===
VITE_API_BASE_URL=http://localhost:8000/api/v1
VITE_CLERK_PUBLISHABLE_KEY=pk_test_...
